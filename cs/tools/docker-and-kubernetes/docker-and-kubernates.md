## Docker and Kubernetes: The Complete Guide
* Udemy
* Stephen Grider

# Install Docker on Mac
  * sign up for docker hub
    * jexxx009

# What is Docker?
  * Docker Client(CLI), Docker Server and Docker Hub
    ```
    docker run hello-world
    ```
    * docker run = docker create + docker start.
      * docker create command creates a container.
      * docker start starts a container.    
      * when you run the command above for the first time, docker client asks docker server for hello-world image. (note that       docker client and docker server is at local)
    * docker server looks at image cache where it realizes image cache doesn't have the image.
    * docker server downloads hello-world image from docker hub
  * Image
    * a file that describes a program configuration and startup commands; FS snapshot + startup commands; (FS = file system)
    * = program configurtation (easy understand)
  * Container
    * a namespaced resources that runs a process(s). (partition of resources)
      * Namespace (Linux Namespace) is a feature of Linux kernel to partition resources for processes.
    * = resource partition (easy understand)
  * Container loads image when running it.
    
# Docker containers (section 2)
  * busybox is a lite-weight linux program.
    ```
    docker run busy-box ls
    ```
  * lists currently running containers.  
    ```
    docker ps
    ```
  * lists currently existing containers. (containers can exist without being started = stop)  
    ```
    docker ps --all
    ```
  * returns a container id (for example, ab92295e9859a86ff59d7a43cd7d4294151e37740465d64c50b3e913c7e22dd5)  
    ```
    docker create hello-world
    ```
  * docker start will simply start a container, and -a flag will print out logs generated from the container.  
    ```
    docker start ab92295e9859a86ff59d7a43cd7d4294151e37740465d64c50b3e913c7e22dd5
    docker start -a ab92295e9859a86ff59d7a43cd7d4294151e37740465d64c50b3e913c7e22dd5
    ```
  * you can start a previously created container with its container id.
    ```
    docker run busybox echo hi there
    docker ps --all 
    (assume ddf1b6421e72 is the busybox container id generated by command above)
    docker start ddf1b6421e72
    docker start -a ddf1b6421e72
    ```
  * this command will fail because you can not replace the startup commands of a previously created container.
    * you will see an error message: 'you cannot start and attach multiple containers at once'
    ```
    docker start -a ddf1b6421e72 bye there
    ```
  * this command will delete some resources including image-cache and stopped containers.
    ```
    docker system prune
    ```
  * docker logs doesn't actually start a container. It will simply bring out the any messages generated from having started a     container. note that 'docker start e37740465d64c50b3e913c7e22dd5' itself won't generate a message to us.
    ```
    docker create busybox echo hi there -->  e37740465d64c50b3e913c7e22dd5
    docker start e37740465d64c50b3e913c7e22dd5  -->  k37740465d64c50b3e913c7e22aa6
    docker logs k37740465d64c50b3e913c7e22aa6 --> hi there
    ```
  * docker stop command will send SIGTERM signal to a container to stop the container itself. (allows clean up itself)
  * docker kill command will send SIGKILL signal to a container to kill the container process right awaw.
    ```
    docker stop e37740465d64c50b3e913c7e22dd5
    docker kill e37740465d64c50b3e913c7e22dd5
    ```
  * redis is an in-memory database program. when you run redis, you can use redis-cli to interact with redis database.
    redis-cli is a command line tool for redis operations. however, you can't directly interact with the container that you   
    just created for running redis. you need to get inside the container that is running and execute a second command for   
    redis-cli operations.
    ```
    docker run redis
    ```
  * exec allows you to execute additional commands inside the container.
    * docker exec {container-id} {command you want to execute inside the container you specified}
    * -it = -i -t
    * -i: attach my terminal to the STDIN of the container you exec (stuff we typed goes to the STDIN of redis-cli in this 
    case)
    * -t: format the output text coming from the exec commmand
    ```
    (assume 06c404248d22 is the container-id of docker redis)
    docker exec 06c404248d22 redis-cli
    docker exec -it 06c404248d22 redis-cli
    ```
    ```
    (assume 06c404248d44 is the container-id of docker redis)
    docker exec -it 06c404248d44 sh
    ```

# Docker Custom Image
  * Let's create an image that runs redis server.
  * Create a Dockerfile in redis-image directory 
    * base image works like an OS when running your image. (initial starting point to your image)
    * alpine has apk included. (apk is a apache package manager)
    * $redis-server will be executed as a terminal command when this image starts

    * alpine base image is downloaded ---> it is used to execute commands specified by RUN ---> 
    ```
    # User an existing docker image as a base image.
    FROM alpine

    # Download and install dependencies.
    RUN apk add --update redis

    # Tell the image what to do when it starts as a container.
    CMD ["redis-server"]
    ```
    * FROM alpine base image is downloaded.
    * RUN create a temporary container from a image downloaded previously and execute commands specified and get these as an 
    image.
    * CMD speicies what commands a container with an image from previous step will execute.
